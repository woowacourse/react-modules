# react-modules

## 📍 학습 목표

- 재사용 가능한 모듈화된 컴포넌트(모달, 커스텀 훅)를 개발하고 npm에 배포할 수 있다.
- Storybook과 RTL을 활용한 컴포넌트 문서화 및 테스트 시나리오를 작성할 수 있다.

<details>
<summary><b>🎯 기능 요구 사항</b></summary>

### 모달 컴포넌트

- 모달 컴포넌트를 npm으로 배포하고 사용할 수 있어야 한다.
- 피그마 시안 예시처럼 모바일에서 사용 가능한 모달 컴포넌트를 만들어야 한다.
- 모달 위치 및 내용 구성 옵션을 prop으로 전달받아 유연하게 모달을 구성할 수 있어야 한다.
- 모달 위치: 중앙, 하단 등
- 모달 내용: 제목, 버튼 등
- 사용자 정의 이벤트 핸들러를 지원해야 한다.
- 모달 열기, 닫기, 확인 등의 동작에 대한 이벤트 핸들러
- 다양한 모달 종류를 대응 가능하게 구현해야 한다.
  - 확인(Alert) 모달: 사용자에게 메시지를 전달하고 확인 버튼만 제공
  - 확인/취소(Confirm) 모달: 사용자에게 선택지를 제공하고 확인 및 취소 버튼 제공
  - 입력(Prompt) 모달: 사용자로부터 입력값을 받을 수 있는 입력 필드와 확인/취소 버튼 제공
- 모달 크기 옵션 추가
  - small, medium, large 등의 크기 옵션을 prop으로 전달받아 모달 크기 조절
- 키보드 사용자를 고려하여 모달 내부 포커스 제어를 구현한다.
  - 모달이 열릴 때 모달 내부의 첫 번째 포커스 가능한 요소로 자동 포커스를 이동시킨다.
  - TAB 키로 모달 내부의 포커스 가능한 요소를 순서대로 탐색할 수 있어야 한다.
  - Shift+TAB 키로 역순 탐색이 가능해야 하며, 마지막 요소에서 첫 번째 요소로 순환되어야 한다.

### 페이먼츠 커스텀 훅

- 페이먼츠 커스텀 훅 모듈을 npm으로 배포하고 사용할 수 있어야 한다.
- 카드 정보 입력에 필요한 상태 관리와 유효성 검사 로직을 함께 포함한 커스텀 훅을 작성해야 한다.
- 각 커스텀 훅은 입력 필드 단위로 책임을 분리해 구성하며, 필요한 경우 다른 훅들과 조합해 사용할 수 있어야 한다.
- 필수적으로 만들어야 하는 커스텀 훅은 페이먼츠 앱에서 다루었던 카드 정보에 대한 부분이다.
- 훅이 입력 로직의 책임을 갖고, UI 컴포넌트는 렌더링에만 집중할 수 있도록 책임을 분리하는 구조를 학습하는 것이 이번 미션의 핵심이다.

</details>

<details>
<summary><b>✅ 프로그래밍 요구사항</b></summary>

### Storybook

- 모달의 위치, 내용, 이벤트 핸들러 등 다양한 prop에 대한 Storybook 테스트 시나리오를 작성한다.
- 모달 컴포넌트의 PC 대응 스토리 작성

### RTL

- 각 커스텀 훅에 대해 독립적으로 테스트를 작성한다.
- 정상 입력과 비정상 입력(성공 시나리오 / 실패 시나리오)을 모두 테스트한다.
- 다양한 잘못된 입력(경계값 초과, 빈 입력, 형식 오류 등)에 대해 폭넓게 테스트한다.
- 카드사 식별 (AMEX, Diners, UnionPay 포함) 및 유효성 검사 로직 테스트
- 카드 번호 포맷팅 기능 테스트
  - 💡 카드 브랜드 구분 로직 (Diners / AMEX / UnionPay)
    ```
    Diners: 36으로 시작하는 14자리 숫자
      예시: 3612 345678 9012
    AMEX: 34, 37로 시작하는 15자리 숫자
      예시 (34로 시작): 3412 345678 90123
      예시 (37로 시작): 3712 345678 90123
    유니온페이: 카드의 앞 번호가 아래 3가지 조건을 만족하는 16자리 숫자
      622126~622925로 시작하는 경우: 6221 2612 3456 7890
      624~626로 시작하는 경우: 6240 1234 5678 9012
      6282~6288로 시작하는 경우: 6282 1234 5678 9012
    ```

</details>

## 🪟 구현 목록 - Components

- [x] 모달을 열 수 있다.
- [x] 열린 모달을 닫을 수 있다.
  - [x] 모달 속 버튼을 눌러 모달을 닫을 수 있다.
  - [x] 모달 바깥 Overlay를 눌러 모달을 닫을 수 있다.
  - [x] esc키를 눌러 모달을 닫을 수 있다.
- [x] 제목을 표시한다.
- [x] 모달 내 내용을 넣는다.
- [x] 모달은 기본적인 요소에 대해 유연한 대응이 가능하다.
  - [x] 상단 닫기 버튼 유무
  - [x] 하단 닫기 버튼 유무
  - [x] 모달 위치(중앙, 하단 등)
  - [x] 사용자 정의 이벤트 핸들러(닫기, 확인 등)
- [x] 다양한 모달 종류에 대응이 가능하다.
  - [x] 확인(Alert) 모달: 사용자에게 메시지를 전달하고 확인 버튼만 제공
  - [x] 확인/취소(Confirm) 모달: 사용자에게 선택지를 제공하고 확인 및 취소 버튼 제공
  - [x] 입력(Prompt) 모달: 사용자로부터 입력값을 받을 수 있는 입력 필드와 확인/취소 버튼 제공
- [x] 모달에 크기 옵션을 넣을 수 있다. (small, medium, large 등)
- [x] 모달 내부 포커스 제어를 구현한다.
  - [x] 모달이 열릴 때 모달 내부의 첫 번째 포커스 가능한 요소로 자동 포커스를 이동시킨다.
  - [x] TAB 키로 모달 내부의 포커스 가능한 요소를 순서대로 탐색할 수 있어야 한다.
  - [x] Shift+TAB 키로 역순 탐색이 가능해야 하며, 마지막 요소에서 첫 번째 요소로 순환되어야 한다.

## 🪝 구현 목록 - Hooks

### CVC 번호, 비밀번호 앞자리 등 단일 숫자 Input

- [x] 해당하는 정보의 상태를 관리할 수 있다.
- [x] 해당하는 정보가 유효한 지 확인한다.
  - [x] 해당하는 정보가 숫자로만 이루어져 있는 지 확인한다.
  - [x] 해당하는 정보가 입력 받은 최대 길이 이내인지 확인한다.

### 카드 번호

- [x] 카드 번호의 상태를 관리할 수 있다.
- [x] 카드 번호가 유효한 지 확인한다.
  - [x] 카드 번호가 숫자로만 이루어져 있는 지 확인한다.
  - [x] 카드 번호가 16자 이내인지 확인한다.
- [x] 카드 번호를 보고 어떤 브랜드인지 확인한다.
  - [x] Visa: 4로 시작하는 16자리 숫자
  - [x] MasterCard: 51~55로 시작하는 16자리 숫자
  - [x] Diners: 36으로 시작하는 14자리 숫자
  - [x] AMEX: 34, 37로 시작하는 15자리 숫자
  - [x] 유니온페이: 카드의 앞 번호가 아래 3가지 조건을 만족하는 16자리 숫자
    - 622126~622925로 시작하는 경우
    - 624~626로 시작하는 경우
    - 6282~6288로 시작하는 경우
- [x] 카드 번호의 브랜드에 따라 포맷팅을 한다.
  - [x] Visa, MasterCard, 유니온 페이: 4-4-4-4
  - [x] Diners: 4-6-4
  - [x] AMEX: 4-6-5

### 유효 기간

- [x] 유효 기간의 상태를 관리할 수 있다.
- [x] 유효 기간이 유효한 지 확인한다.
  - [x] 유효 기간이 숫자로만 이루어져 있는 지 확인한다.
  - [x] 각 유효기간이 2자 이내인지 확인한다.
  - [x] 월은 01 ~ 12 사이의 숫자여야 한다.
  - [x] 월과 년은 오늘 날짜 이후여야 한다.
