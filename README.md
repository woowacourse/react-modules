# react-modules

## step1

## Modal Module

### 기능

- 모달 컴포넌트를 npm으로 배포하고 사용할 수 있어야 한다.

  - [x] 컴포넌트 생성
  - [x] 컴포넌트 스토리북 테스트
  - [x] 컴포넌트 빌드 및 배포
  - [x] 컴포넌트 설치 및 사용

- 피그마 시안 예시처럼 모바일에서 사용 가능한 모달 컴포넌트를 만들어야 한다.

  - [x] 모바일에서 사용 가능한 레이아웃으로 만든다.

- 모달 위치 및 내용 구성 옵션을 prop으로 전달받아 유연하게 모달을 구성할 수 있어야 한다.

  - [x] isModalOpen을 전달받을 수 있다. : 모달 열기
  - [x] position을 전달받을 수 있다. : 모달 위치
  - [x] title을 전달받을 수 있다. : 모달 제목
  - [x] children을 전달받을 수 있다. : 모달 내용
  - [x] onClose 전달받을 수 있다. : 모달 닫기

- 사용자 정의 이벤트 핸들러
  - [x] modalOpen으로 모달 열기
  - [x] modalClose으로 모달 닫기

### 컴포넌트

- Modal

### storybook

- [x] 카드사 선택 컴포넌트
  - [x] 중앙에 위치하는지
- [x] 동의 컴포넌트
  - [x] 하단에 위치하는지

## Hooks Module

### 기능

- 페이먼츠 커스텀 훅 모듈을 npm으로 배포하고 사용할 수 있어야 한다.

  - [x] 커스텀 훅 생성
  - [x] 커스텀 훅 RTL 테스트
  - [x] 커스텀 훅 빌드 및 배포
  - [x] 커스텀 훅 설치 및 사용

- 페이먼츠 카드의 다양한 정보에 대한 유효성 검사 로직을 여러 개의 작은 커스텀 훅으로 분리하고, 필요에 따라 조합하여 사용할 수 있도록 한다.

  - [x] useCardNumber
    - [x] cardNumber는 숫자여야 한다. (errorMessage: "카드 번호는 숫자로 입력해 주세요.")
    - [x] cardNumber는 각 칸마다 4자리여야 한다. (errorMessage: "카드 번호는 4자리로 입력해 주세요.")
  - [x] useExpiryDate
    - [x] month
      - [x] month는 숫자여야 한다. (errorMessage: "월은 숫자로 입력해 주세요.")
      - [x] month는 두 자리여야 한다. (errorMessage: "월은 2자리로 입력해 주세요.")
      - [x] month는 1~12 사이의 숫자여야 한다. (errorMessage: "유효하지 않은 월입니다.")
    - [x] year
      - [x] year는 숫자여야 한다. (errorMessage: "연도는 숫자로 입력해 주세요.")
      - [x] year는 두 자리여야 한다. (errorMessage: "연도는 2자리로 입력해 주세요.")
      - [x] year는 25 이상의 숫자여야 한다. (errorMessage: "유효하지 않은 연도입니다.")
  - [x] useCVC
    - [x] cvc는 숫자여야 한다. (errorMessage: "CVC는 숫자로 입력해 주세요.")
    - [x] cvc는 세 자리여야 한다. (errorMessage: "CVC는 3자리로 입력해 주세요.")
  - [x] usePassword
    - [x] password는 숫자여야 한다. (errorMessage: "카드 비밀번호는 숫자로 입력해 주세요.")
    - [x] password는 두 자리여야 한다. (errorMessage: "카드 비밀번호는 2자리로 입력해 주세요.")

- 커스텀 훅은 카드 정보의 유효성 검사 결과와 에러 정보를 사용자인 개발자에게 제공할 수 있어야 한다. 예를 들어 useCardNumber hook을 만든다면 카드 번호 유효성 검사 결과를 불리언 값으로 반환해야 한다. 만약 유효성 검사에 실패한 경우, 에러 정보를 문자열 형태로 반환할 수 있어야 한다.
  - [x] useCardNumber 훅에서 유효성 검사 결과로 불리언 값과 에러 메시지를 반환할 수 있다.
  - [x] useExpiryDate 훅에서 유효성 검사 결과를 불리언 값과 에러 메시지를 반환할 수 있다.
  - [x] useCVC 훅에서 유효성 검사 결과를 불리언 값과 에러 메시지를 반환할 수 있다.
  - [x] usePassword 훅에서 유효성 검사 결과를 불리언 값과 에러 메시지를 반환할 수 있다.

### 페이먼츠 커스텀 훅

- useCardNumber
- useExpiryDate
- useCVC
- usePassword
- useCardBrand

### RTL

- useCardNumbers
  - 정상 작동
    - [x] 4자리 숫자가 입력되면 정상 작동된다.
  - 오류 검증
    - [x] 숫자가 아닌 값을 validate 하면 에러 메시지가 세팅된다.
    - [x] 4자리가 아닌 숫자를 validate 하면 에러 메시지가 세팅된다.
- useExpiryDate
  - 정상 작동
    - [x] 월 입력에 1에서 12 사이의 숫자를 입력하면 정상 작동한다.
    - [x] 연도 입력에 25 이상의 숫자를 입력하면 정상 작동한다.
  - 오류 검증
    - [x] 월 입력에 숫자가 아닌 값을 validate 하면 에러 메시지가 세팅된다
    - [x] 월 입력에 2자리 이하의 숫자를 validate 하면 에러 메시지가 세팅된다
    - [x] 유효하지 않은 월을 validate 하면 에러 메시지가 세팅된다
    - [x] 연도 입력에 숫자가 아닌 값을 validate 하면 에러 메시지가 세팅된다
    - [x] 연도 입력에 2자리x 이하의 숫자를 validate 하면 에러 메시지가 세팅된다
    - [x] 유효하지 않은 연도를 validate 하면 에러 메시지가 세팅된다
- useCVCNumber
  - 정상 작동
    - [x] 3자리 숫자가 입력되면 정상 작동한다.
  - 오류 검증
    - [x] 숫자가 아닌 값을 validate 하면 에러 메시지가 세팅된다
    - [x] 3자리 이하의 숫자를 validate 하면 에러 메시지가 세팅된다
- usePassword
  - 정상 작동
    - [x] 3자리 숫자를 입력하면 정상 작동한다.
  - 오류 검증
    - [x] 숫자가 아닌 값을 validate 하면 에러 메시지가 세팅된다
    - [x] 2자리가 아닌 숫자를 validate 하면 에러 메시지가 세팅된다

## step2

## Modal Module

### 기능

- 모달 컴포넌트를 재사용할 수 있어야 한다.

  - [x] PC 환경에서의 사용을 고려하여 대응한다.
  - [x] 새로운 타입의 모달 형태를 구현한다. (반응형 디자인 확장)

- 다양한 모달 사용을 위한 요구사항에 대응할 수 있어야 한다.

  - [x] 확인(Alert) 모달: 사용자에게 메시지를 전달하고 확인 버튼만 제공한다.
  - [x] 확인/취소(Confirm) 모달: 사용자에게 선택지를 제공하고 확인 및 취소 버튼을 제공한다.
  - [x] 입력(Prompt) 모달: 사용자로부터 입력값을 받을 수 있는 입력 필드와 확인/취소 버튼을 제공한다.
  - [x] small, medium, large 등의 크기 옵션을 prop으로 전달받아 모달 크기를 조절한다.

- 키보드 사용자를 고려하여 모달 내부 포커스 제어를 구현한다.

  - [x] 모달이 열릴 때 모달 내부의 첫 번째 포커스 가능한 요소로 자동 포커스를 이동시킨다.
  - [x] TAB 키로 모달 내부의 포커스 가능한 요소를 순서대로 탐색할 수 있어야 한다.
  - [x] Shift+TAB 키로 역순 탐색이 가능해야 하며, 마지막 요소에서 첫 번째 요소로 순환되어야 한다.

### 컴포넌트 설계

- [x] Modal 모듈이 기본적으로 가지고 있을 레이아웃 & 상태
  - [x] modal background (default)
  - [x] modal container (default)
  - [x] isOpen (prop)
  - [x] position (prop)
  - [x] title (prop)
  - [x] XButton (prop)
  - [x] size (prop)
  - [x] onClose (prop)
  - [x] onBackdropClick (prop)
- [x] Modal esc 키 눌렀을 경우 모달 닫힘 기능 제공
- [x] Modal 모듈을 사용해서 다양한 모달 컴포넌트를 구현한다.
  - [x] AlertModal : 사용자에게 메시지를 전달하고 확인 버튼 제공
  - [x] ConfirmModal : 확인 & 취소 버튼 제공
  - [x] PromptModal : 입력 필드와 확인 & 취소 버튼 제공

## Storybook

- [x] 모달 컴포넌트의 PC 대응 스토리 작성
  - [x] 닫기 버튼
    - [x] X 사용할 때
    - [x] X 사용하지 않을 때
  - [x] 사이즈 테스트
    - [x] small 옵션
    - [x] medium 옵션
    - [x] large 옵션
- 다양한 모달 컴포넌트 스토리북 작성
  - [x] AlertModal
    - [x] 사용자 메시지와 함께 확인 버튼이 화면에 표시되는지
    - position
      - [x] center일 때
      - [x] bottom일 때
    - size
      - [x] small
      - [x] medium
      - [x] large
  - [x] ConfirmModal
    - [x] 확인과 취소 버튼이 화면에 표시되는지
    - position
      - [x] center일 때
      - [x] bottom일 때
    - size
      - [x] small
      - [x] medium
      - [x] large
  - [x] PromptModal
    - [x] 입력 필드와 확인과 취소 버튼이 화면에 표시되는지
    - position
      - [x] center일 때
      - [x] bottom일 때
    - size
      - [x] small
      - [x] medium
      - [x] large

### 배포 & 설치

- [x] 모달 배포
- [x] 모달 리드미 수정

## Hooks Module

### 기능

- 다양한 카드 브랜드 지원을 확장한다.
  - [ ] 주요 카드사를 식별한다.
    - [ ] Visa : 4로 시작하는 16자리 숫자인 경우 'Visa'를 반환한다.
    - [ ] Master : 51 - 55로 시작하는 16자리 숫자안 경우 'Master'을 반환한다.
    - [ ] Diners : 36으로 시작하는 14자리 숫자인 경우 'Diners'를 반환한다.
    - [ ] AMEX : 34, 37로 시작하는 15자리 숫자인 경우 'AMEX'를 반환한다.
    - [ ] 유니온페이 : 카드의 앞 번호가 아래 3가지 조건을 만족하는 16자리 숫자인 경우 'unionPay'를 반환한다.
      - [ ] 622126~622925로 시작하는 경우: 6221 2612 3456 7890
      - [ ] 624~626로 시작하는 경우: 6240 1234 5678 9012
      - [ ] 6282~6288로 시작하는 경우: 6282 1234 5678 9012
  - [ ] 주요 카드사의 카드 번호 유효성 검사를 수행한다.
    - [ ] 주요 카드사의 식별 번호에 해당하지 않는 경우 오류를 반환한다.
- 카드 번호 포맷팅 기능을 추가한다.
  - [ ] 사용자 입력 시 자동으로 카드사별 규칙에 맞게 카드 번호를 구분하여 표시한다.
    - [ ] Visa
      - [ ] 4로 시작하는 경우 : 4567 1234 1234 1234
    - [ ] Master
      - [ ] 51로 시작하는 경우 : 5132 1234 1234 1234
      - [ ] 52로 시작하는 경우 : 5232 1234 1234 1234
      - [ ] 53로 시작하는 경우 : 5332 1234 1234 1234
      - [ ] 54로 시작하는 경우 : 5432 1234 1234 1234
      - [ ] 55로 시작하는 경우 : 5532 1234 1234 1234
    - [ ] Diners
      - [ ] 36으로 시작하는 경우 : 3612 345678 9012
    - [ ] AMEX
      - [ ] 34로 시작하는 경우 : 3412 345678 90123
      - [ ] 37로 시작하는 경우 : 3712 345678 90123
    - UnionPay
      - [ ] 622126~622925로 시작하는 경우 : 6221 2612 3456 7890
      - [ ] 624~626로 시작하는 경우 : 6240 1234 5678 9012
      - [ ] 6282~6288로 시작하는 경우 : 6282 1234 5678 9012

### 커스텀 훅

## useCardBrand

### RTL

- [x] 카드사 식별 (AMEX, Diners, UnionPay 포함)
  - [x] 4로 시작하는 경우 VISA를 반환한다.
  - [x] 51-55로 시작하는 경우 Master을 반환한다.
  - [x] 36으로 시작하는 경우 Diners를 반환한다.
  - [x] 34, 37로 시작하는 경우 AMEX를 반환한다.
  - [x] 622126-622925로 시작하는 경우 UnionPay를 반환한다.
  - [x] 624-626로 시작하는 경우 UnionPay를 반환한다.
  - [x] 6282-6288로 시작하는 경우 UnionPay를 반환한다.
- [ ] 유효성 검사 로직 테스트
  - [ ] 카드사별 조건에 해당하지 않는 경우 유효하지 않는 카드라는 메시지를 반환한다.
- [ ] 카드 번호 포맷팅 기능 테스트
  - [ ] VISA & Master & UnionPay인 경우 4-4-4-4 포맷팅을 반환한다.
  - [ ] Diners인 경우 4-6-4 포맷팅을 반환한다.
  - [ ] AMEX인 경우 4-6-5 포맷팅을 반환한다.

## 커밋메시지

- feat : 새로운 기능을 추가한 경우
- fix : 버그 수정
- docs : 문서를 수정한 경우
- style : 코드 스타일, 포멧, 주석을 변경
- refactor : 코드 리팩토링
- test : 테스트 관련 코드를 수정한 경우
- chore : 코드 수정이 아닌, 단순 폴더명 파일명 등을 수정한 경우
